#pragma once


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
class StringUtils
{
public:
    /// @brief Преобразует voltage вольт в текстовую строку
    /// @attention Страка будет храниться до следующего вызова функции. Если результат нужен большее количество времени, то его нужно скопитровать себе
    char *Voltage2String(float voltage,     ///< значение напряжения в вольтах
                         bool alwaysSign,   ///< если установлено в true, знак выводится всегда
                         char buffer[20]    ///< сюда записывается возвращаемое значение
    );
    /// \brief Переводит число с плавающей точкой в текстовый вид. numDigits - число цифровых знакомест
    /// \attention Строка будет храниться до следующего вызова функции. Если результат нужен большее количество времени, то его нужно скопироавать себе.
    /// \retval указатель на строку с числом.
    char *Float2String(float value, bool alwaysSign, int numDigits, char bufferOut[20]);
    /// @brief Преобразует time секунд в текстовую строку
    char* Time2String(float time,           ///< время в секундах. Может быть отрицательным
                      bool alwaysSign,      ///< если true, знак показывается даже если time > 0
                      char buffer[20]       ///< сюда записывается возвращаемое значение
    );
    /// Преобразует freq герц в текстовую строку.
    char* Freq2String(float freq, bool, char bufferOut[20]);

    char* FloatFract2String(float value, bool alwaysSign, char bufferOut[20]);
    /// Преобразует градусы в строку.
    char* Phase2String(float phase, bool, char bufferOut[20]);
    /// Преобразует freq герц в текстовую строку. При этом число количество цифр в строке равно numDigits
    char* Freq2StringAccuracy(float freq, char bufferOut[20], int numDigits);
    /// @brief Преобразует value в текстовую строку. При этом выводятся все 8 разрядов
    /// @attention Строка будет храниться до следующего вызова функции. Если результат нужен большее количество времени, то его нужно скопировать себе
    char* Bin2String(uint8 value, char bufferOut[9]);
    /// @brief Преобразует value в текстовую строку
    /// @attention Строка будте храниться до следующего вызова функции. Если рузультат нужен большее количество времени, то его нужно скопировать себе
    char* Bin2String16(uint16 value, char bufferOut[19]);
    /// @brief Преобразует value в текстовую строку в шестнадцатиричном виде
    /// @attention Строка будет храниться до следующего вызова функции. Если результат нужен большее количество времени, то его нужно скопировать себе
    char* Hex8toString(uint8 value, char bufferOut[3]);

    char* Hex16toString(uint16 value, char bufferOut[5]);

    char* Hex32toString(uint value, char bufferOut[9], bool upper);
    /// @brief Преобразует value в текстовую строку
    /// @attention Строка будет храниться до следующего вызова функции. Если результат нужен большее количество времени, то его нужно скопировать себе
    char* Int2String(int value,                     ///< значение
                     bool alwaysSign,               ///< если установлен в true, знак будет выводиться всегда
                     int numMinFields,              ///< минимальное число занимаемых знакомест. Если для вывода числа столько не требуется, лишние заполняются нулями
                     char bufferOut[20]             ///< сюда записывается возвращаемое значение
    );
private:
    static int NumDigitsInIntPart(float value);
};

bool String2Int(char *str, int *value);
/// @brief Преобразует time секунд в текстовую строку
char* Time2StringAccuracy(float time,           ///< время в секундах. Может быть отрицательным
                          bool alwaysSign,      ///< если true, знак показывается даже если time > 0
                          char bufferOut[20],   ///< сюда записывается возвращаемое значение
                          int numDigits         ///< количество цифр в строке
);
/// Преобразует децибелы в текстовую строку
char* Db2String(float value, int numDigits, char bufferOut[20]);

extern StringUtils strUtils;

typedef char *(StringUtils::*pFuncPCFBPC)(float, bool, char*);
